{"ast":null,"code":"import _regeneratorRuntime from\"/Users/diego/Desktop/react-ed/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/diego/Desktop/react-ed/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/diego/Desktop/react-ed/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var axios=require('axios');var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isValidated=_useState6[0],setIsValidated=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loginSuccessful=_useState8[0],setLoginSuccessful=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isConnecting=_useState12[0],setIsConnecting=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isTaking=_useState14[0],setIsTaking=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isRedirecting=_useState16[0],setIsRedirecting=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isThereGrades=_useState18[0],setIsThereGrades=_useState18[1];var _useState19=useState({}),_useState20=_slicedToArray(_useState19,2),grades=_useState20[0],setGrades=_useState20[1];var handleUsernameChange=function handleUsernameChange(event){setUsername(event.target.value);};var handlePasswordChange=function handlePasswordChange(event){setPassword(event.target.value);};var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var loginURL,loginPayload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);loginURL=\"https://api.ecoledirecte.com/v3/login.awp?v=4.17.9\";loginPayload={\"uuid\":\"\",\"identifiant\":username,\"motdepasse\":password,\"isReLogin\":false};setIsConnecting(true);axios.get(loginURL,{params:{data:loginPayload}}).then(function(loginResponse){setIsConnecting(false);var loginResponseCode=loginResponse.data.code;if(loginResponseCode!==200){setIsValidated(false);setLoginSuccessful(false);setIsLoading(false);return 0;}setLoginSuccessful(true);var studentToken=loginResponse.data.token;var studentID=loginResponse.data.data.accounts[0].id;var gradesURL=\"https://api.ecoledirecte.com/v3/eleves/\"+studentID+\"/notes.awp?verbe=get&v=4.17.9\";var gradesPayload={\"anneeScolaire\":\"\"};var gradesHeaders={\"x-token\":studentToken};setIsTaking(true);axios.get(gradesURL,{params:{data:gradesPayload},headers:gradesHeaders}).then(function(gradesResponse){setIsTaking(false);var gradesResponseCode=gradesResponse.data.code;if(gradesResponseCode!==200){setIsLoading(false);return 0;}calculateAverages(gradesResponse.data);});});case 5:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var calculateAverages=function calculateAverages(_ref2){var data=_ref2.data;if(data.notes.length>0){setIsThereGrades(true);}/*\n    CALCULER LES MOYENNES ICI\n    */setIsLoading(false);};var submit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!isLoading){setIsValidated(true);getData();}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:function(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Moyennes \\xC9cole Directe \",/*#__PURE__*/_jsx(\"a\",{className:\"version\",children:\"v2\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"Entrez votre identifiant et mot de passe ED\"}),/*#__PURE__*/_jsx(\"a\",{children:loginSuccessful?\"\":\"Identifiant ou mot de passe incorrect\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleUsernameChange,type:\"text\",placeholder:\"Identifiant\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handlePasswordChange,type:\"password\",placeholder:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"button\",{onClick:submit,children:isConnecting?\"Connexion...\":isTaking?\"Récupération des notes...\":\"Valider\"})]}),function(){// Affichage des Moyennes\nif(isValidated&&loginSuccessful&&!isLoading){if(isThereGrades){return/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Moyenne : \"})});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Pas de notes pour l'instant...\"})});}}}(),/*#__PURE__*/_jsxs(\"form\",{action:\"https://www.ecoledirecte.com\",className:\"box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\xC9cole Directe\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ce cite calcule les moyennes de chaque mati\\xE8re ainsi que la moyenne g\\xE9n\\xE9rale, cette fonction n'est plus disponible sur le site officiel.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(){return setIsRedirecting(true);},children:isRedirecting?\"Redirection...\":\"Site officiel ED\"}),/*#__PURE__*/_jsx(\"p\",{children:\"DF\"})]})]});}()});}export default App;","map":{"version":3,"names":["React","useState","App","username","setUsername","password","setPassword","axios","require","isValidated","setIsValidated","loginSuccessful","setLoginSuccessful","isLoading","setIsLoading","isConnecting","setIsConnecting","isTaking","setIsTaking","isRedirecting","setIsRedirecting","isThereGrades","setIsThereGrades","grades","setGrades","handleUsernameChange","event","target","value","handlePasswordChange","getData","loginURL","loginPayload","get","params","data","then","loginResponse","loginResponseCode","code","studentToken","token","studentID","accounts","id","gradesURL","gradesPayload","gradesHeaders","headers","gradesResponse","gradesResponseCode","calculateAverages","notes","length","submit"],"sources":["/Users/diego/Desktop/react-ed/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport './App.css';\n\n\nfunction App() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const axios = require('axios');\n\n  const [isValidated, setIsValidated] = useState(false);\n  const [loginSuccessful, setLoginSuccessful] = useState(true);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [isTaking, setIsTaking] = useState(false);\n\n  const [isRedirecting, setIsRedirecting] = useState(false);\n\n  const [isThereGrades, setIsThereGrades] = useState(false);\n  const [grades, setGrades] = useState({});\n\n  const handleUsernameChange = event => {\n    setUsername(event.target.value);\n  }\n\n  const handlePasswordChange = event => {\n    setPassword(event.target.value);\n  }\n\n  const getData = async() => {\n    setIsLoading(true);\n\n    const loginURL = \"https://api.ecoledirecte.com/v3/login.awp?v=4.17.9\";\n    \n    const loginPayload = {\n      \"uuid\": \"\",\n      \"identifiant\": username,\n      \"motdepasse\": password,\n      \"isReLogin\": false\n    }\n\n    setIsConnecting(true);\n    axios.get(loginURL, { params: { data: loginPayload } }).then((loginResponse) => {\n      setIsConnecting(false);\n      const loginResponseCode = loginResponse.data.code;\n      if (loginResponseCode !== 200) {\n        setIsValidated(false);\n        setLoginSuccessful(false);\n        setIsLoading(false);\n        return 0;\n      }\n      setLoginSuccessful(true);\n      \n      const studentToken = loginResponse.data.token;\n      const studentID = loginResponse.data.data.accounts[0].id;\n\n      const gradesURL = \"https://api.ecoledirecte.com/v3/eleves/\" + studentID + \"/notes.awp?verbe=get&v=4.17.9\";\n\n      const gradesPayload = {\n        \"anneeScolaire\": \"\"\n      }\n\n      const gradesHeaders = {\n        \"x-token\": studentToken\n      }\n      \n      setIsTaking(true);\n      axios.get(gradesURL, { params: { data: gradesPayload }, headers: gradesHeaders }).then((gradesResponse) => {\n        setIsTaking(false);\n        const gradesResponseCode = gradesResponse.data.code;\n        if (gradesResponseCode !== 200) {\n          setIsLoading(false);\n          return 0;\n        }\n        calculateAverages(gradesResponse.data);\n      });\n    })\n  }\n\n  const calculateAverages = ({ data }) => {\n    if (data.notes.length > 0) { setIsThereGrades(true); }\n\n    /*\n    CALCULER LES MOYENNES ICI\n    */\n    \n    setIsLoading(false);\n\n\n  }\n\n  const submit = async() => {\n    if (!isLoading) {\n      setIsValidated(true);\n      getData();\n    }\n  }\n  \n  return (\n    <div className=\"App\">\n      {(() => {\n        return (\n            <div>\n              <div className=\"box\">\n                <h1>Moyennes École Directe <a className=\"version\">v2</a></h1>\n                <p>Entrez votre identifiant et mot de passe ED</p>\n                <a>{loginSuccessful ? \"\" : \"Identifiant ou mot de passe incorrect\"}</a>\n                <input onChange={handleUsernameChange} type=\"text\" placeholder=\"Identifiant\"></input>\n                <input onChange={handlePasswordChange} type=\"password\" placeholder=\"Mot de passe\"></input>\n                <button onClick={submit}>{isConnecting ? \"Connexion...\" : isTaking ? \"Récupération des notes...\" : \"Valider\"}</button>\n              </div>\n\n              {(() => {\n                // Affichage des Moyennes\n                if (isValidated && loginSuccessful && !isLoading) {\n                  if (isThereGrades) {\n                    return (\n                      <div className=\"box\">\n                        <h1>Moyenne : </h1>\n                      </div>\n                    )\n                  } else {\n                    return (\n                      <div className=\"box\">\n                        <h2>Pas de notes pour l'instant...</h2>\n                      </div>\n                    )\n                  }\n                }\n              })()}\n\n              <form action=\"https://www.ecoledirecte.com\" className=\"box\">\n                <h1>École Directe</h1>\n                <p>Ce cite calcule les moyennes de chaque matière ainsi que la moyenne générale, cette fonction n'est plus disponible sur le site officiel.</p>\n                <button type=\"submit\" onClick={() => setIsRedirecting(true)}>{isRedirecting ? \"Redirection...\" : \"Site officiel ED\"}</button>\n                <p>DF</p>\n              </form>\n            </div>\n          )\n      })()}\n    </div>\n    \n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}